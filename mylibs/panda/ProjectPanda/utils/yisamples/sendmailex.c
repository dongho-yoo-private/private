#include "../yi.h"
#include "../yiSmtp.h"
#include "../yifile.h"

const char* pMessage = "以下の認証コードで登録の手続きを完了させてくらさい。\r\nα版なので今のところはこんなものです。（兪）\r\n";

const unsigned char title[] = {
	0x47, 0x6f, 0x21, 0x21, 0x59, 0x6f, 0x74, 0x73, 0x75, 0x79, 0x61, 0x1b, 0x24, 0x42, 0x24, 0x4e, 0x47, 
	0x27, 0x3e, 0x5a, 0x25, 0x33, 0x21, 0x3c, 0x25, 0x49, 0x1b, 0x28, 0x42, 0x00
};

const unsigned char contents[] = {
	0x1b, 0x24, 0x42, 0x32, 0x3c, 0x35, 0x2d, 0x24, 0x4e, 0x47, 0x27, 0x3e, 0x5a, 0x25, 0x33, 0x21, 0x3c, 
	0x25, 0x49, 0x24, 0x47, 0x47, 0x27, 0x3e, 0x5a, 0x24, 0x72, 0x39, 0x54, 0x24, 0x43, 0x24, 0x46, 
	0x24, 0x2f, 0x24, 0x40, 0x24, 0x35, 0x24, 0x24, 0x21, 0x23, 0x1b, 0x28, 0x42, 0x0d, 0x0a, 0x1b, 
	0x24, 0x42, 0x47, 0x27, 0x3e, 0x5a, 0x25, 0x33, 0x21, 0x3c, 0x25, 0x49, 0x1b, 0x28, 0x42, 0x3a, 
	0x20, 0x00
};

// -------------------------------
int main(int argc, char** argv)
{
	int size;
	int res;
	//char* p = (char*)yiFileLoad(argv[1], &size);
	char buffer[1024];
	//p[size]=0;

	sprintf(buffer, "%s %u-%u", contents, rand(), rand());
	printf(buffer);
	res = yiSmtpSend("smtp.mail.yahoo.co.jp", 587, "ZG9uaG9feW9v", "OTIwMDY4", "donho_yoo@yahoo.co.jp", "admin@goyotsuya.com", 
			"dongho.yoo@live.jp\0", title,
				buffer, True, 0);

	usleep(5000000);

	//yiFileUnload(p);

	printf("result : %d\n", res);
	return 0;
}

